<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 500" width="1000" height="500">
  <defs>
    <!-- Gradients -->
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#0d1117"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>

    <linearGradient id="layer5Gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#8957e5" stop-opacity="0.15"/>
      <stop offset="50%" stop-color="#8957e5" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#8957e5" stop-opacity="0.15"/>
    </linearGradient>

    <linearGradient id="layer4Gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#58a6ff" stop-opacity="0.15"/>
      <stop offset="50%" stop-color="#58a6ff" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#58a6ff" stop-opacity="0.15"/>
    </linearGradient>

    <linearGradient id="layer3Gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#3fb950" stop-opacity="0.15"/>
      <stop offset="50%" stop-color="#3fb950" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#3fb950" stop-opacity="0.15"/>
    </linearGradient>

    <linearGradient id="layer2Gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#f97316" stop-opacity="0.15"/>
      <stop offset="50%" stop-color="#f97316" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#f97316" stop-opacity="0.15"/>
    </linearGradient>

    <linearGradient id="layer1Gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#eab308" stop-opacity="0.15"/>
      <stop offset="50%" stop-color="#eab308" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#eab308" stop-opacity="0.15"/>
    </linearGradient>

    <linearGradient id="layer0Gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#7d8590" stop-opacity="0.15"/>
      <stop offset="50%" stop-color="#7d8590" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#7d8590" stop-opacity="0.15"/>
    </linearGradient>

    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#21262d"/>
      <stop offset="50%" stop-color="#30363d"/>
      <stop offset="100%" stop-color="#21262d"/>
    </linearGradient>

    <!-- Filters -->
    <filter id="softShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>

    <!-- Pattern for Layer 0 -->
    <pattern id="binaryPattern" patternUnits="userSpaceOnUse" width="20" height="20">
      <text x="2" y="10" fill="#484f58" font-family="monospace" font-size="8" opacity="0.3">01</text>
      <text x="12" y="18" fill="#484f58" font-family="monospace" font-size="8" opacity="0.3">10</text>
    </pattern>
  </defs>

  <!--
    Layout calculations:
    - Total height: 500px
    - Header: 48px (y: 0-48)
    - Top margin: 18px
    - Bottom margin: 18px
    - Content area: 500 - 48 - 18 - 18 = 416px
    - 6 layers, 5 gaps of 8px = 40px for gaps
    - Layer height: (416 - 40) / 6 = 62.67 ≈ 62px each
    - Layer starts: 48 + 18 = 66
    - Layer positions: 66, 136, 206, 276, 346, 416
    - Last layer bottom: 416 + 62 = 478, margin: 500 - 478 = 22px (close to top 18)
  -->

  <!-- Background -->
  <rect width="1000" height="500" fill="url(#bgGradient)" rx="12"/>
  <rect x="1" y="1" width="998" height="498" fill="none" stroke="#30363d" stroke-width="1" rx="12"/>

  <!-- Header (height: 48px) -->
  <g>
    <rect width="1000" height="48" fill="url(#headerGradient)" rx="12"/>
    <rect y="38" width="1000" height="10" fill="url(#headerGradient)"/>
    <line x1="0" y1="48" x2="1000" y2="48" stroke="#30363d" stroke-width="1"/>
    <text x="500" y="15" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" letter-spacing="0.5">KNOWLEDGE REPRESENTATION STACK</text>
    <text x="500" y="35" fill="#c9d1d9" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="600" text-anchor="middle" letter-spacing="1">CONTEXT-GRAPH KNOWLEDGE BASE</text>
  </g>

  <!-- Layer Stack: 6 layers, each 62px, gaps 8px, starting at y=66 -->
  <!-- Container offset -->
  <g transform="translate(40, 66)">

    <!-- Layer 5: Semantic Embeddings (y=0, h=62) -->
    <g transform="translate(0, 0)" filter="url(#softShadow)">
      <rect width="920" height="62" rx="8" fill="#161b22" stroke="#8957e5" stroke-width="1.5"/>
      <rect width="920" height="62" rx="8" fill="url(#layer5Gradient)"/>

      <!-- Layer badge: vertically centered in left area -->
      <g transform="translate(16, 17)">
        <rect width="80" height="28" rx="6" fill="#8957e5" opacity="0.2" stroke="#8957e5" stroke-width="1"/>
        <text x="40" y="18" fill="#8957e5" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle">LAYER 5</text>
      </g>

      <!-- Title and description -->
      <text x="120" y="26" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="14" font-weight="600">SEMANTIC EMBEDDINGS</text>
      <text x="120" y="44" fill="#7d8590" font-family="system-ui, sans-serif" font-size="12">Dense vectors for similarity and semantic search</text>

      <!-- Visual: Vector box centered vertically (box h=34, centered in 62 → y=14) -->
      <g transform="translate(720, 14)">
        <rect width="180" height="34" rx="4" fill="#0d1117" stroke="#30363d"/>
        <text x="10" y="14" fill="#8957e5" font-family="monospace" font-size="9">[0.23, 0.87, -0.12,</text>
        <text x="10" y="27" fill="#8957e5" font-family="monospace" font-size="9"> 0.45, -0.33, 0.91...]</text>
      </g>
    </g>

    <!-- Layer 4: Contextualized Quintuples (y=70, h=62) -->
    <g transform="translate(0, 70)" filter="url(#softShadow)">
      <rect width="920" height="62" rx="8" fill="#161b22" stroke="#58a6ff" stroke-width="1.5"/>
      <rect width="920" height="62" rx="8" fill="url(#layer4Gradient)"/>

      <g transform="translate(16, 17)">
        <rect width="80" height="28" rx="6" fill="#58a6ff" opacity="0.2" stroke="#58a6ff" stroke-width="1"/>
        <text x="40" y="18" fill="#58a6ff" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle">LAYER 4</text>
      </g>

      <text x="120" y="26" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="14" font-weight="600">CONTEXTUALIZED QUINTUPLES</text>
      <text x="120" y="44" fill="#7d8590" font-family="system-ui, sans-serif" font-size="12">Knowledge with provenance and uncertainty</text>

      <!-- Visual: Quintuple (box h=34, y=14) -->
      <g transform="translate(540, 14)">
        <rect width="360" height="34" rx="4" fill="#0d1117" stroke="#30363d"/>
        <text y="21" fill="#7d8590" font-family="monospace" font-size="10">
          <tspan x="12" fill="#7d8590">(</tspan>
          <tspan fill="#d2a8ff">subject</tspan>
          <tspan fill="#7d8590">, </tspan>
          <tspan fill="#79c0ff">predicate</tspan>
          <tspan fill="#7d8590">, </tspan>
          <tspan fill="#ffa657">object</tspan>
          <tspan fill="#7d8590">, </tspan>
          <tspan fill="#7ee787">context</tspan>
          <tspan fill="#7d8590">, </tspan>
          <tspan fill="#f97316">confidence</tspan>
          <tspan fill="#7d8590">)</tspan>
        </text>
      </g>
    </g>

    <!-- Layer 3: Hypergraph Relations (y=140, h=62) -->
    <g transform="translate(0, 140)" filter="url(#softShadow)">
      <rect width="920" height="62" rx="8" fill="#161b22" stroke="#3fb950" stroke-width="1.5"/>
      <rect width="920" height="62" rx="8" fill="url(#layer3Gradient)"/>

      <g transform="translate(16, 17)">
        <rect width="80" height="28" rx="6" fill="#3fb950" opacity="0.2" stroke="#3fb950" stroke-width="1"/>
        <text x="40" y="18" fill="#3fb950" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle">LAYER 3</text>
      </g>

      <text x="120" y="26" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="14" font-weight="600">HYPERGRAPH RELATIONS</text>
      <text x="120" y="44" fill="#7d8590" font-family="system-ui, sans-serif" font-size="12">N-ary relationships for patterns and concerns</text>

      <!-- Visual: Hyperedge (box h=42, centered → y=10) -->
      <g transform="translate(720, 10)">
        <rect width="180" height="42" rx="4" fill="#0d1117" stroke="#30363d"/>
        <!-- Central hyperedge node -->
        <ellipse cx="90" cy="21" rx="20" ry="10" fill="#3fb950" opacity="0.3" stroke="#3fb950"/>
        <text x="90" y="24" fill="#3fb950" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle">pattern</text>
        <!-- Connected nodes -->
        <circle cx="35" cy="13" r="7" fill="#161b22" stroke="#7d8590"/>
        <circle cx="35" cy="31" r="7" fill="#161b22" stroke="#7d8590"/>
        <circle cx="145" cy="13" r="7" fill="#161b22" stroke="#7d8590"/>
        <circle cx="145" cy="31" r="7" fill="#161b22" stroke="#7d8590"/>
        <!-- Connection lines -->
        <line x1="42" y1="13" x2="70" y2="18" stroke="#3fb950" stroke-width="1" opacity="0.6"/>
        <line x1="42" y1="31" x2="70" y2="24" stroke="#3fb950" stroke-width="1" opacity="0.6"/>
        <line x1="110" y1="18" x2="138" y2="13" stroke="#3fb950" stroke-width="1" opacity="0.6"/>
        <line x1="110" y1="24" x2="138" y2="31" stroke="#3fb950" stroke-width="1" opacity="0.6"/>
      </g>
    </g>

    <!-- Layer 2: Multi-Resolution Graph (y=210, h=62) -->
    <g transform="translate(0, 210)" filter="url(#softShadow)">
      <rect width="920" height="62" rx="8" fill="#161b22" stroke="#f97316" stroke-width="1.5"/>
      <rect width="920" height="62" rx="8" fill="url(#layer2Gradient)"/>

      <g transform="translate(16, 17)">
        <rect width="80" height="28" rx="6" fill="#f97316" opacity="0.2" stroke="#f97316" stroke-width="1"/>
        <text x="40" y="18" fill="#f97316" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle">LAYER 2</text>
      </g>

      <text x="120" y="26" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="14" font-weight="600">MULTI-RESOLUTION GRAPH</text>
      <text x="120" y="44" fill="#7d8590" font-family="system-ui, sans-serif" font-size="12">Same entities at different abstraction levels</text>

      <!-- Visual: Zoom levels (box h=42, y=10) -->
      <g transform="translate(720, 10)">
        <rect width="180" height="42" rx="4" fill="#0d1117" stroke="#30363d"/>
        <!-- Nested rectangles showing zoom -->
        <rect x="12" y="6" width="46" height="30" rx="3" fill="none" stroke="#f97316" stroke-width="1" opacity="0.4"/>
        <rect x="20" y="10" width="30" height="22" rx="2" fill="none" stroke="#f97316" stroke-width="1" opacity="0.6"/>
        <rect x="26" y="14" width="18" height="14" rx="1" fill="#f97316" opacity="0.3" stroke="#f97316" stroke-width="1"/>
        <!-- Labels (centered: 42px height, 3 lines with ~11px spacing, center at 21) -->
        <text x="75" y="13" fill="#7d8590" font-family="system-ui, sans-serif" font-size="8">L1: Module</text>
        <text x="75" y="24" fill="#7d8590" font-family="system-ui, sans-serif" font-size="8">L2: Function</text>
        <text x="75" y="35" fill="#f97316" font-family="system-ui, sans-serif" font-size="8" font-weight="600">L3: Statement</text>
      </g>
    </g>

    <!-- Layer 1: Base Property Graph (y=280, h=62) -->
    <g transform="translate(0, 280)" filter="url(#softShadow)">
      <rect width="920" height="62" rx="8" fill="#161b22" stroke="#eab308" stroke-width="1.5"/>
      <rect width="920" height="62" rx="8" fill="url(#layer1Gradient)"/>

      <g transform="translate(16, 17)">
        <rect width="80" height="28" rx="6" fill="#eab308" opacity="0.2" stroke="#eab308" stroke-width="1"/>
        <text x="40" y="18" fill="#eab308" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle">LAYER 1</text>
      </g>

      <text x="120" y="26" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="14" font-weight="600">BASE PROPERTY GRAPH</text>
      <text x="120" y="44" fill="#7d8590" font-family="system-ui, sans-serif" font-size="12">Structural facts: AST, call graph, type graph</text>

      <!-- Visual: Graph nodes (box h=42, y=10) -->
      <g transform="translate(720, 10)">
        <rect width="180" height="42" rx="4" fill="#0d1117" stroke="#30363d"/>
        <!-- Graph visualization (text y = circle cy + font-size*0.35 for centering) -->
        <circle cx="38" cy="21" r="9" fill="#161b22" stroke="#eab308" stroke-width="1.5"/>
        <text x="38" y="23" fill="#eab308" font-family="monospace" font-size="7" text-anchor="middle">fn</text>
        <circle cx="85" cy="12" r="7" fill="#161b22" stroke="#eab308" stroke-width="1"/>
        <text x="85" y="14" fill="#7d8590" font-family="monospace" font-size="6" text-anchor="middle">arg</text>
        <circle cx="85" cy="32" r="7" fill="#161b22" stroke="#eab308" stroke-width="1"/>
        <text x="85" y="34" fill="#7d8590" font-family="monospace" font-size="6" text-anchor="middle">ret</text>
        <circle cx="135" cy="21" r="9" fill="#161b22" stroke="#eab308" stroke-width="1.5"/>
        <text x="135" y="23" fill="#eab308" font-family="monospace" font-size="7" text-anchor="middle">fn</text>
        <!-- Edges -->
        <path d="M47,18 Q65,8 78,12" fill="none" stroke="#eab308" stroke-width="1" opacity="0.6"/>
        <path d="M47,24 Q65,34 78,32" fill="none" stroke="#eab308" stroke-width="1" opacity="0.6"/>
        <path d="M92,12 Q108,6 126,16" fill="none" stroke="#eab308" stroke-width="1" stroke-dasharray="3,2" opacity="0.5"/>
        <text x="108" y="8" fill="#484f58" font-family="system-ui, sans-serif" font-size="6">CALLS</text>
      </g>
    </g>

    <!-- Layer 0: Source Truth (y=350, h=62) -->
    <g transform="translate(0, 350)" filter="url(#softShadow)">
      <rect width="920" height="62" rx="8" fill="#161b22" stroke="#7d8590" stroke-width="1.5"/>
      <rect width="920" height="62" rx="8" fill="url(#layer0Gradient)"/>
      <rect width="920" height="62" rx="8" fill="url(#binaryPattern)" opacity="0.3"/>

      <g transform="translate(16, 17)">
        <rect width="80" height="28" rx="6" fill="#7d8590" opacity="0.2" stroke="#7d8590" stroke-width="1"/>
        <text x="40" y="18" fill="#7d8590" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle">LAYER 0</text>
      </g>

      <text x="120" y="26" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="14" font-weight="600">SOURCE TRUTH</text>
      <text x="120" y="44" fill="#7d8590" font-family="system-ui, sans-serif" font-size="12">Immutable bytes, lines, positions</text>

      <!-- Visual: URI example (box h=34, y=14, text centered at 34/2 + 3.5 = 20.5) -->
      <g transform="translate(480, 14)">
        <rect width="420" height="34" rx="4" fill="#0d1117" stroke="#30363d"/>
        <text y="20" fill="#7d8590" font-family="monospace" font-size="10">
          <tspan x="12" fill="#484f58">cgkb://</tspan>
          <tspan fill="#79c0ff">payments</tspan>
          <tspan fill="#484f58">/main/lib/checkout.ex#</tspan>
          <tspan fill="#ffa657">fn:process/2</tspan>
          <tspan fill="#484f58">@</tspan>
          <tspan fill="#7d8590">a1b2c3</tspan>
        </text>
      </g>
    </g>

  </g>

  <!-- Vertical connection indicators between layers -->
  <g transform="translate(80, 66)" opacity="0.4">
    <line x1="0" y1="62" x2="0" y2="70" stroke="#8957e5" stroke-width="2" stroke-dasharray="3,3"/>
    <line x1="0" y1="132" x2="0" y2="140" stroke="#58a6ff" stroke-width="2" stroke-dasharray="3,3"/>
    <line x1="0" y1="202" x2="0" y2="210" stroke="#3fb950" stroke-width="2" stroke-dasharray="3,3"/>
    <line x1="0" y1="272" x2="0" y2="280" stroke="#f97316" stroke-width="2" stroke-dasharray="3,3"/>
    <line x1="0" y1="342" x2="0" y2="350" stroke="#eab308" stroke-width="2" stroke-dasharray="3,3"/>
  </g>
</svg>