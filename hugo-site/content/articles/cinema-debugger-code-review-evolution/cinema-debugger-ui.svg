<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900" width="1400" height="900">
  <defs>
    <!-- Gradients -->
    <linearGradient id="panelGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#1c2128"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>
    
    <linearGradient id="timelineTrack" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#21262d"/>
      <stop offset="50%" stop-color="#30363d"/>
      <stop offset="100%" stop-color="#21262d"/>
    </linearGradient>
    
    <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#238636"/>
      <stop offset="100%" stop-color="#2ea043"/>
    </linearGradient>
    
    <linearGradient id="riskGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#f97316"/>
      <stop offset="62%" stop-color="#f97316"/>
      <stop offset="62%" stop-color="#30363d"/>
      <stop offset="100%" stop-color="#30363d"/>
    </linearGradient>
    
    <linearGradient id="nodeGlowGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#58a6ff" stop-opacity="0.6"/>
      <stop offset="100%" stop-color="#58a6ff" stop-opacity="0"/>
    </linearGradient>
    
    <radialGradient id="orbitalBg" cx="50%" cy="50%" r="60%">
      <stop offset="0%" stop-color="#161b22"/>
      <stop offset="100%" stop-color="#0d1117"/>
    </radialGradient>
    
    <!-- Filters -->
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="strongGlow" x="-100%" y="-100%" width="300%" height="300%">
      <feGaussianBlur stdDeviation="6" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.4"/>
    </filter>
    
    <!-- Patterns -->
    <pattern id="gridPattern" patternUnits="userSpaceOnUse" width="40" height="40">
      <circle cx="20" cy="20" r="0.5" fill="#30363d" opacity="0.3"/>
    </pattern>
    
    <pattern id="codeStripes" patternUnits="userSpaceOnUse" width="4" height="4">
      <line x1="0" y1="0" x2="4" y2="4" stroke="#484f58" stroke-width="0.5" opacity="0.5"/>
    </pattern>
    
    <!-- Clip paths -->
    <clipPath id="orbitalClip">
      <rect x="16" y="16" width="1368" height="209" rx="8"/>
    </clipPath>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="900" fill="#0d1117"/>
  
  <!-- ==================== ORBITAL VIEW (Top 25%) ==================== -->
  <g id="orbital-view">
    <rect x="16" y="16" width="1368" height="209" rx="8" fill="url(#orbitalBg)" stroke="#30363d" stroke-width="1"/>
    
    <!-- Grid pattern background -->
    <rect x="16" y="16" width="1368" height="209" fill="url(#gridPattern)" clip-path="url(#orbitalClip)" opacity="0.6"/>
    
    <!-- Constellation lines (background decoration) -->
    <g opacity="0.15" stroke="#58a6ff" stroke-width="0.5">
      <line x1="100" y1="50" x2="200" y2="80"/>
      <line x1="200" y1="80" x2="150" y2="150"/>
      <line x1="1200" y1="60" x2="1300" y2="100"/>
      <line x1="1300" y1="100" x2="1250" y2="180"/>
    </g>
    
    <!-- Graph edges (relationships) -->
    <g id="graph-edges" stroke="#30363d" stroke-width="1.5" fill="none" opacity="0.7">
      <!-- Main connections to focal node -->
      <path d="M700,120 Q650,90 550,95" stroke="#58a6ff" opacity="0.5"/>
      <path d="M700,120 Q750,80 850,85"/>
      <path d="M700,120 Q680,160 600,175"/>
      <path d="M700,120 Q720,150 800,160"/>
      <path d="M700,120 Q620,100 480,110"/>
      <path d="M700,120 Q780,100 920,95"/>
      
      <!-- Secondary connections -->
      <path d="M550,95 Q500,100 480,110"/>
      <path d="M850,85 Q880,88 920,95"/>
      <path d="M600,175 Q500,185 420,170"/>
      <path d="M800,160 Q900,165 980,145"/>
      <path d="M920,95 Q960,110 980,145"/>
      
      <!-- Data flow indicator (dashed) -->
      <path d="M480,110 Q380,120 320,100" stroke-dasharray="4,4" opacity="0.4"/>
      <path d="M980,145 Q1050,150 1100,130" stroke-dasharray="4,4" opacity="0.4"/>
    </g>
    
    <!-- Graph nodes -->
    <g id="graph-nodes">
      <!-- Peripheral nodes (smaller, lower risk) -->
      <g transform="translate(320,100)">
        <circle r="14" fill="#161b22" stroke="#22c55e" stroke-width="2"/>
        <text y="28" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Registry</text>
      </g>
      
      <g transform="translate(420,170)">
        <circle r="16" fill="#161b22" stroke="#22c55e" stroke-width="2"/>
        <text y="30" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Config</text>
      </g>
      
      <g transform="translate(480,110)">
        <circle r="18" fill="#161b22" stroke="#eab308" stroke-width="2"/>
        <text y="32" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Supervisor</text>
      </g>
      
      <g transform="translate(550,95)">
        <circle r="20" fill="#161b22" stroke="#eab308" stroke-width="2"/>
        <text y="34" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Manager</text>
      </g>
      
      <g transform="translate(600,175)">
        <circle r="17" fill="#161b22" stroke="#22c55e" stroke-width="2"/>
        <text y="31" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Monitor</text>
      </g>
      
      <g transform="translate(800,160)">
        <circle r="19" fill="#161b22" stroke="#f97316" stroke-width="2"/>
        <text y="33" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Worker</text>
      </g>
      
      <g transform="translate(850,85)">
        <circle r="18" fill="#161b22" stroke="#eab308" stroke-width="2"/>
        <text y="32" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Queue</text>
      </g>
      
      <g transform="translate(920,95)">
        <circle r="16" fill="#161b22" stroke="#22c55e" stroke-width="2"/>
        <text y="30" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Metrics</text>
      </g>
      
      <g transform="translate(980,145)">
        <circle r="15" fill="#161b22" stroke="#22c55e" stroke-width="2"/>
        <text y="29" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Logger</text>
      </g>
      
      <g transform="translate(1100,130)">
        <circle r="13" fill="#161b22" stroke="#22c55e" stroke-width="2"/>
        <text y="27" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle">Telemetry</text>
      </g>
      
      <!-- FOCAL NODE (Pool.checkout) - largest, with glow -->
      <g transform="translate(700,120)" filter="url(#strongGlow)">
        <circle r="32" fill="#161b22" stroke="#ef4444" stroke-width="3"/>
        <circle r="38" fill="none" stroke="#ef4444" stroke-width="1" opacity="0.4">
          <animate attributeName="r" values="38;44;38" dur="2s" repeatCount="indefinite"/>
          <animate attributeName="opacity" values="0.4;0.1;0.4" dur="2s" repeatCount="indefinite"/>
        </circle>
        <text y="4" fill="#c9d1d9" font-family="monospace" font-size="10" text-anchor="middle" font-weight="bold">checkout/2</text>
        <text y="50" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle">Pool</text>
      </g>
    </g>
    
    <!-- Orbital view header -->
    <g transform="translate(32, 36)">
      <text fill="#7d8590" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="0.5">IMPACT GRAPH</text>
      <text x="95" fill="#484f58" font-family="system-ui, sans-serif" font-size="10">¬∑ 11 affected entities</text>
    </g>
    
    <!-- Legend -->
    <g transform="translate(1200, 32)">
      <circle cx="0" cy="4" r="4" fill="#22c55e"/>
      <text x="10" y="8" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9">Low</text>
      <circle cx="45" cy="4" r="4" fill="#eab308"/>
      <text x="55" y="8" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9">Med</text>
      <circle cx="90" cy="4" r="4" fill="#f97316"/>
      <text x="100" y="8" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9">High</text>
      <circle cx="135" cy="4" r="4" fill="#ef4444"/>
      <text x="145" y="8" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9">Crit</text>
    </g>
    
    <!-- Level indicator -->
    <g transform="translate(1280, 195)">
      <rect x="0" y="0" width="90" height="24" rx="4" fill="#21262d" stroke="#30363d"/>
      <text x="8" y="16" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10">L1</text>
      <text x="26" y="16" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="10">Function</text>
      <path d="M76,8 L80,4 L84,8" stroke="#58a6ff" fill="none" stroke-width="1.5"/>
      <path d="M76,16 L80,20 L84,16" stroke="#58a6ff" fill="none" stroke-width="1.5"/>
    </g>
  </g>
  
  <!-- ==================== TIMELINE SCRUBBER (10%) ==================== -->
  <g id="timeline-scrubber" transform="translate(16, 241)">
    <rect width="1368" height="80" rx="8" fill="url(#panelGradient)" stroke="#30363d" stroke-width="1"/>
    
    <!-- Header -->
    <text x="16" y="20" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="0.5">CHANGE TIMELINE</text>
    <text x="140" y="20" fill="#484f58" font-family="system-ui, sans-serif" font-size="10">Hunk 23 of 47</text>
    
    <!-- Transport controls -->
    <g transform="translate(16, 35)">
      <g fill="#484f58" font-family="system-ui, sans-serif" font-size="14">
        <rect x="0" y="0" width="28" height="28" rx="4" fill="#21262d" stroke="#30363d"/>
        <text x="14" y="19" text-anchor="middle">‚èÆ</text>
        
        <rect x="34" y="0" width="28" height="28" rx="4" fill="#21262d" stroke="#30363d"/>
        <text x="48" y="19" text-anchor="middle">‚óÄ</text>
        
        <rect x="68" y="0" width="36" height="28" rx="4" fill="#238636" stroke="#2ea043"/>
        <text x="86" y="19" text-anchor="middle" fill="#ffffff">‚ñ∂</text>
        
        <rect x="110" y="0" width="28" height="28" rx="4" fill="#21262d" stroke="#30363d"/>
        <text x="124" y="19" text-anchor="middle">‚ñ∂</text>
        
        <rect x="144" y="0" width="28" height="28" rx="4" fill="#21262d" stroke="#30363d"/>
        <text x="158" y="19" text-anchor="middle">‚è≠</text>
      </g>
    </g>
    
    <!-- Timeline track -->
    <g transform="translate(200, 40)">
      <rect x="0" y="8" width="980" height="12" rx="6" fill="url(#timelineTrack)"/>
      
      <!-- Tick marks -->
      <g stroke="#484f58">
        <!-- Minor ticks -->
        <line x1="20" y1="10" x2="20" y2="18" stroke-width="1"/>
        <line x1="45" y1="10" x2="45" y2="18" stroke-width="1"/>
        <line x1="70" y1="10" x2="70" y2="18" stroke-width="1"/>
        <line x1="95" y1="10" x2="95" y2="18" stroke-width="1"/>
        <line x1="145" y1="10" x2="145" y2="18" stroke-width="1"/>
        <line x1="170" y1="10" x2="170" y2="18" stroke-width="1"/>
        <line x1="195" y1="10" x2="195" y2="18" stroke-width="1"/>
        <line x1="245" y1="10" x2="245" y2="18" stroke-width="1"/>
        <line x1="270" y1="10" x2="270" y2="18" stroke-width="1"/>
        <line x1="320" y1="10" x2="320" y2="18" stroke-width="1"/>
        <line x1="345" y1="10" x2="345" y2="18" stroke-width="1"/>
        <line x1="370" y1="10" x2="370" y2="18" stroke-width="1"/>
        <line x1="420" y1="10" x2="420" y2="18" stroke-width="1"/>
        <line x1="445" y1="10" x2="445" y2="18" stroke-width="1"/>
        <line x1="495" y1="10" x2="495" y2="18" stroke-width="1"/>
        <line x1="545" y1="10" x2="545" y2="18" stroke-width="1"/>
        <line x1="570" y1="10" x2="570" y2="18" stroke-width="1"/>
        <line x1="595" y1="10" x2="595" y2="18" stroke-width="1"/>
        <line x1="645" y1="10" x2="645" y2="18" stroke-width="1"/>
        <line x1="670" y1="10" x2="670" y2="18" stroke-width="1"/>
        <line x1="695" y1="10" x2="695" y2="18" stroke-width="1"/>
        <line x1="745" y1="10" x2="745" y2="18" stroke-width="1"/>
        <line x1="795" y1="10" x2="795" y2="18" stroke-width="1"/>
        <line x1="820" y1="10" x2="820" y2="18" stroke-width="1"/>
        <line x1="845" y1="10" x2="845" y2="18" stroke-width="1"/>
        <line x1="895" y1="10" x2="895" y2="18" stroke-width="1"/>
        <line x1="920" y1="10" x2="920" y2="18" stroke-width="1"/>
        <line x1="945" y1="10" x2="945" y2="18" stroke-width="1"/>
        <line x1="970" y1="10" x2="970" y2="18" stroke-width="1"/>
        
        <!-- Keyframe ticks (taller, colored) -->
        <line x1="120" y1="6" x2="120" y2="22" stroke="#eab308" stroke-width="2"/>
        <line x1="220" y1="6" x2="220" y2="22" stroke="#22c55e" stroke-width="2"/>
        <line x1="295" y1="6" x2="295" y2="22" stroke="#22c55e" stroke-width="2"/>
        <line x1="395" y1="6" x2="395" y2="22" stroke="#f97316" stroke-width="2"/>
        <line x1="520" y1="6" x2="520" y2="22" stroke="#ef4444" stroke-width="2"/>
        <line x1="620" y1="6" x2="620" y2="22" stroke="#eab308" stroke-width="2"/>
        <line x1="720" y1="6" x2="720" y2="22" stroke="#22c55e" stroke-width="2"/>
        <line x1="870" y1="6" x2="870" y2="22" stroke="#22c55e" stroke-width="2"/>
      </g>
      
      <!-- Playhead -->
      <g transform="translate(520, 0)" filter="url(#glow)">
        <polygon points="0,-4 6,4 0,32 -6,4" fill="#58a6ff"/>
        <line x1="0" y1="4" x2="0" y2="28" stroke="#58a6ff" stroke-width="2"/>
      </g>
      
      <!-- Tooltip preview above playhead -->
      <g transform="translate(520, -35)">
        <rect x="-60" y="0" width="120" height="28" rx="4" fill="#21262d" stroke="#58a6ff" stroke-width="1" filter="url(#softShadow)"/>
        <text x="0" y="12" fill="#c9d1d9" font-family="monospace" font-size="9" text-anchor="middle">checkout/2 +ref</text>
        <text x="0" y="23" fill="#7d8590" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle">Critical ¬∑ Return type</text>
        <polygon points="0,28 -6,28 0,35 6,28" fill="#21262d"/>
      </g>
    </g>
    
    <!-- Speed controls -->
    <g transform="translate(1210, 35)">
      <rect x="0" y="0" width="32" height="24" rx="4" fill="#21262d" stroke="#30363d"/>
      <text x="16" y="16" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle">0.5√ó</text>
      
      <rect x="38" y="0" width="32" height="24" rx="4" fill="#238636" stroke="#2ea043"/>
      <text x="54" y="16" fill="#ffffff" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle">1√ó</text>
      
      <rect x="76" y="0" width="32" height="24" rx="4" fill="#21262d" stroke="#30363d"/>
      <text x="92" y="16" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle">2√ó</text>
      
      <rect x="114" y="0" width="32" height="24" rx="4" fill="#21262d" stroke="#30363d"/>
      <text x="130" y="16" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle">4√ó</text>
    </g>
    
    <!-- Concern filter pills -->
    <g transform="translate(300, 16)">
      <rect x="0" y="0" width="80" height="20" rx="10" fill="#21262d" stroke="#eab308" stroke-width="1"/>
      <text x="12" y="14" fill="#eab308" font-family="system-ui, sans-serif" font-size="10">üîí Security</text>
      
      <rect x="90" y="0" width="90" height="20" rx="10" fill="#30363d" stroke="#30363d" stroke-width="1"/>
      <text x="102" y="14" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10">‚ö° Performance</text>
      
      <rect x="190" y="0" width="80" height="20" rx="10" fill="#30363d" stroke="#30363d" stroke-width="1"/>
      <text x="202" y="14" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10">üõ° Reliability</text>
    </g>
  </g>
  
  <!-- ==================== CODE VIEW (Left, 55%) ==================== -->
  <g id="code-view" transform="translate(16, 337)">
    <rect width="680" height="475" rx="8" fill="url(#panelGradient)" stroke="#30363d" stroke-width="1"/>
    
    <!-- File path header -->
    <rect width="680" height="36" rx="8" fill="#161b22"/>
    <rect y="28" width="680" height="8" fill="#161b22"/>
    <line x1="0" y1="36" x2="680" y2="36" stroke="#30363d"/>
    
    <g transform="translate(12, 14)">
      <!-- File icon -->
      <rect x="0" y="2" width="12" height="14" rx="2" fill="none" stroke="#7d8590" stroke-width="1"/>
      <line x1="4" y1="6" x2="8" y2="6" stroke="#7d8590" stroke-width="1"/>
      <line x1="4" y1="9" x2="8" y2="9" stroke="#7d8590" stroke-width="1"/>
      <line x1="4" y1="12" x2="6" y2="12" stroke="#7d8590" stroke-width="1"/>
      
      <text x="20" y="12" fill="#58a6ff" font-family="monospace" font-size="12">lib/snakepit/pool.ex</text>
      <text x="200" y="12" fill="#484f58" font-family="system-ui, sans-serif" font-size="11">¬∑ Modified ¬∑ +12 -8</text>
    </g>
    
    <!-- Code content area -->
    <g transform="translate(0, 44)">
      <!-- Line numbers gutter -->
      <rect width="44" height="390" fill="#0d1117"/>
      
      <!-- Code lines -->
      <g font-family="'JetBrains Mono', 'Fira Code', monospace" font-size="12">
        <!-- Line 1 -->
        <text x="12" y="20" fill="#484f58">1</text>
        <text x="52" y="20" fill="#ff7b72">defmodule</text>
        <text x="115" y="20" fill="#ffa657">Snakepit.Pool</text>
        <text x="220" y="20" fill="#ff7b72">do</text>
        
        <!-- Line 2 -->
        <text x="12" y="40" fill="#484f58">2</text>
        <text x="52" y="40" fill="#8b949e">@moduledoc</text>
        <text x="130" y="40" fill="#a5d6ff">"Worker pool with reference tracking"</text>
        
        <!-- Line 3 (empty) -->
        <text x="12" y="60" fill="#484f58">3</text>
        
        <!-- Line 4 - @spec (modification context) -->
        <text x="12" y="80" fill="#484f58">4</text>
        <rect x="44" y="66" width="636" height="20" fill="#1f3a5f" opacity="0.3"/>
        <text x="52" y="80" fill="#8b949e">@spec</text>
        <text x="95" y="80" fill="#d2a8ff">checkout</text>
        <text x="160" y="80" fill="#c9d1d9">(pool, timeout) ::</text>
        <text x="310" y="80" fill="#c9d1d9">{:ok, ref, pid} | {:error, reason}</text>
        
        <!-- Line 5 - function def -->
        <text x="12" y="100" fill="#484f58">5</text>
        <text x="52" y="100" fill="#ff7b72">def</text>
        <text x="80" y="100" fill="#d2a8ff">checkout</text>
        <text x="145" y="100" fill="#c9d1d9">(pool, timeout \\ 5000)</text>
        <text x="340" y="100" fill="#ff7b72">do</text>
        
        <!-- Line 6 -->
        <text x="12" y="120" fill="#484f58">6</text>
        <text x="52" y="120" fill="#ff7b72">case</text>
        <text x="84" y="120" fill="#c9d1d9">:gen_statem.call(pool, :checkout, timeout)</text>
        <text x="420" y="120" fill="#ff7b72">do</text>
        
        <!-- Line 7 - DELETED (red) -->
        <text x="8" y="140" fill="#f85149">‚àí</text>
        <text x="12" y="140" fill="#484f58">7</text>
        <rect x="44" y="126" width="636" height="20" fill="#5d1e21" opacity="0.4"/>
        <rect x="44" y="126" width="4" height="20" fill="#f85149"/>
        <text x="60" y="140" fill="#ffa198">{:ok, worker} -></text>
        <!-- Deletion indicator dot -->
        <circle cx="665" cy="136" r="4" fill="#f85149"/>
        
        <!-- Line 8 - ADDED (green) - HIGHLIGHTED/FOCUSED -->
        <text x="8" y="160" fill="#3fb950">+</text>
        <text x="12" y="160" fill="#484f58">8</text>
        <rect x="44" y="146" width="636" height="20" fill="#1b4721" opacity="0.4"/>
        <rect x="44" y="146" width="4" height="20" fill="#3fb950"/>
        <!-- Focus highlight -->
        <rect x="44" y="146" width="636" height="20" fill="#58a6ff" opacity="0.15"/>
        <rect x="680" y="146" width="4" height="20" fill="#58a6ff"/>
        <text x="60" y="160" fill="#7ee787">{:ok, ref, worker} -></text>
        <!-- Multiple indicators -->
        <circle cx="645" cy="156" r="4" fill="#3fb950"/>
        <circle cx="657" cy="156" r="4" fill="#eab308"/>
        <rect x="665" y="152" width="8" height="8" fill="#22c55e" opacity="0.8"/>
        
        <!-- Line 9 -->
        <text x="12" y="180" fill="#484f58">9</text>
        <text x="60" y="180" fill="#c9d1d9">Process.monitor(worker)</text>
        
        <!-- Line 10 - DELETED -->
        <text x="8" y="200" fill="#f85149">‚àí</text>
        <text x="12" y="200" fill="#484f58">10</text>
        <rect x="44" y="186" width="636" height="20" fill="#5d1e21" opacity="0.4"/>
        <rect x="44" y="186" width="4" height="20" fill="#f85149"/>
        <text x="60" y="200" fill="#ffa198">{:ok, worker}</text>
        
        <!-- Line 11 - ADDED -->
        <text x="8" y="220" fill="#3fb950">+</text>
        <text x="12" y="220" fill="#484f58">11</text>
        <rect x="44" y="206" width="636" height="20" fill="#1b4721" opacity="0.4"/>
        <rect x="44" y="206" width="4" height="20" fill="#3fb950"/>
        <text x="60" y="220" fill="#7ee787">{:ok, ref, worker}</text>
        <circle cx="665" cy="216" r="4" fill="#3fb950"/>
        
        <!-- Line 12 -->
        <text x="12" y="240" fill="#484f58">12</text>
        <text x="60" y="240" fill="#ffa657">{:error, :timeout}</text>
        <text x="195" y="240" fill="#c9d1d9">-></text>
        
        <!-- Line 13 -->
        <text x="12" y="260" fill="#484f58">13</text>
        <text x="68" y="260" fill="#c9d1d9">{:error, :pool_busy}</text>
        
        <!-- Line 14 -->
        <text x="12" y="280" fill="#484f58">14</text>
        <text x="60" y="280" fill="#ffa657">{:error, reason}</text>
        <text x="175" y="280" fill="#c9d1d9">-></text>
        
        <!-- Line 15 -->
        <text x="12" y="300" fill="#484f58">15</text>
        <text x="68" y="300" fill="#c9d1d9">{:error, reason}</text>
        
        <!-- Line 16 -->
        <text x="12" y="320" fill="#484f58">16</text>
        <text x="52" y="320" fill="#ff7b72">end</text>
        
        <!-- Line 17 -->
        <text x="12" y="340" fill="#484f58">17</text>
        <text x="52" y="340" fill="#ff7b72">end</text>
        
        <!-- Line 18 (empty) -->
        <text x="12" y="360" fill="#484f58">18</text>
        
        <!-- Line 19 -->
        <text x="12" y="380" fill="#484f58">19</text>
        <text x="52" y="380" fill="#8b949e"># Checkin returns worker to pool</text>
      </g>
      
      <!-- Coverage indicator legend (inline) -->
      <g transform="translate(580, 10)">
        <rect width="8" height="8" fill="#22c55e" opacity="0.8"/>
        <text x="12" y="8" fill="#7d8590" font-family="system-ui, sans-serif" font-size="8">covered</text>
        <rect x="55" y="0" width="8" height="8" fill="url(#codeStripes)"/>
        <text x="67" y="8" fill="#7d8590" font-family="system-ui, sans-serif" font-size="8">partial</text>
      </g>
    </g>
    
    <!-- View mode tabs -->
    <g transform="translate(0, 439)">
      <rect width="680" height="36" rx="0" fill="#0d1117"/>
      <rect y="0" width="680" height="1" fill="#30363d"/>
      
      <!-- Tab: Semantic (selected) -->
      <rect x="12" y="8" width="80" height="24" rx="4" fill="#21262d" stroke="#58a6ff"/>
      <text x="52" y="24" fill="#58a6ff" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Semantic</text>
      
      <!-- Tab: AST -->
      <rect x="100" y="8" width="50" height="24" rx="4" fill="transparent"/>
      <text x="125" y="24" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">AST</text>
      
      <!-- Tab: Blame -->
      <rect x="158" y="8" width="55" height="24" rx="4" fill="transparent"/>
      <text x="185" y="24" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Blame</text>
      
      <!-- Tab: Tests -->
      <rect x="221" y="8" width="55" height="24" rx="4" fill="transparent"/>
      <text x="248" y="24" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Tests</text>
      
      <!-- Tab: Raw -->
      <rect x="284" y="8" width="50" height="24" rx="4" fill="transparent"/>
      <text x="309" y="24" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle">Raw</text>
    </g>
  </g>
  
  <!-- ==================== CONTEXT PANE (Right, 50%) ==================== -->
  <g id="context-pane" transform="translate(712, 337)">
    <rect width="672" height="475" rx="8" fill="url(#panelGradient)" stroke="#30363d" stroke-width="1"/>
    
    <!-- Header -->
    <rect width="672" height="36" rx="8" fill="#161b22"/>
    <rect y="28" width="672" height="8" fill="#161b22"/>
    <line x1="0" y1="36" x2="672" y2="36" stroke="#30363d"/>
    <text x="16" y="23" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11" font-weight="600" letter-spacing="0.5">CONTEXT FOR checkout/2</text>
    
    <!-- Auto-refresh indicator -->
    <g transform="translate(610, 10)">
      <circle cx="8" cy="8" r="6" fill="none" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="2,2">
        <animateTransform attributeName="transform" type="rotate" from="0 8 8" to="360 8 8" dur="3s" repeatCount="indefinite"/>
      </circle>
      <text x="20" y="12" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9">Live</text>
    </g>
    
    <!-- Cards container -->
    <g transform="translate(12, 48)">
      
      <!-- Card 1: CALLERS (collapsed) -->
      <g id="card-callers">
        <rect width="648" height="72" rx="6" fill="#0d1117" stroke="#30363d"/>
        <g transform="translate(12, 14)">
          <text fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11" font-weight="600">CALLERS</text>
          <text x="60" y="0" fill="#484f58" font-family="system-ui, sans-serif" font-size="10">3 functions</text>
          <!-- Collapse chevron -->
          <path d="M620,0 L626,-4 L632,0" stroke="#7d8590" fill="none" stroke-width="1.5" transform="translate(-8, 2)"/>
        </g>
        <g transform="translate(16, 34)" font-family="monospace" font-size="11">
          <text fill="#d2a8ff">Worker.checkout/1</text>
          <rect x="140" y="-10" width="28" height="16" rx="3" fill="#21262d"/>
          <text x="147" y="2" fill="#7d8590" font-size="9">12√ó</text>
          
          <text x="180" fill="#d2a8ff">PoolManager.acquire/2</text>
          <rect x="355" y="-10" width="24" height="16" rx="3" fill="#21262d"/>
          <text x="361" y="2" fill="#7d8590" font-size="9">8√ó</text>
          
          <text x="395" fill="#d2a8ff">ConnectionPool.get/1</text>
          <rect x="555" y="-10" width="24" height="16" rx="3" fill="#21262d"/>
          <text x="561" y="2" fill="#7d8590" font-size="9">3√ó</text>
        </g>
        <g transform="translate(16, 54)" font-family="monospace" font-size="11">
          <text fill="#7d8590">+ 0 more callers</text>
        </g>
      </g>
      
      <!-- Card 2: CALLEES (collapsed) -->
      <g id="card-callees" transform="translate(0, 84)">
        <rect width="648" height="52" rx="6" fill="#0d1117" stroke="#30363d"/>
        <g transform="translate(12, 14)">
          <text fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11" font-weight="600">CALLEES</text>
          <text x="62" y="0" fill="#484f58" font-family="system-ui, sans-serif" font-size="10">2 functions</text>
          <path d="M620,0 L626,-4 L632,0" stroke="#7d8590" fill="none" stroke-width="1.5" transform="translate(-8, 2)"/>
        </g>
        <g transform="translate(16, 34)" font-family="monospace" font-size="11">
          <text fill="#79c0ff">:gen_statem.call/3</text>
          <text x="150" fill="#79c0ff">Process.monitor/1</text>
        </g>
      </g>
      
      <!-- Card 3: TYPE INFO -->
      <g id="card-types" transform="translate(0, 148)">
        <rect width="648" height="68" rx="6" fill="#0d1117" stroke="#30363d"/>
        <g transform="translate(12, 14)">
          <text fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11" font-weight="600">TYPE SIGNATURE</text>
          <path d="M620,0 L626,4 L632,0" stroke="#7d8590" fill="none" stroke-width="1.5" transform="translate(-8, -2)"/>
        </g>
        <g transform="translate(16, 36)" font-family="monospace" font-size="11">
          <text fill="#8b949e">@spec</text>
          <text x="42" fill="#d2a8ff">checkout</text>
          <text x="100" fill="#c9d1d9">(</text>
          <text x="108" fill="#ffa657">GenServer.server</text>
          <text x="215" fill="#c9d1d9">,</text>
          <text x="225" fill="#ffa657">timeout</text>
          <text x="280" fill="#c9d1d9">) ::</text>
        </g>
        <g transform="translate(40, 52)" font-family="monospace" font-size="11">
          <text fill="#c9d1d9">{:ok,</text>
          <text x="40" fill="#ffa657">reference</text>
          <text x="110" fill="#c9d1d9">,</text>
          <text x="120" fill="#ffa657">pid</text>
          <text x="145" fill="#c9d1d9">} |</text>
          <text x="170" fill="#c9d1d9">{:error,</text>
          <text x="235" fill="#ffa657">atom</text>
          <text x="270" fill="#c9d1d9">}</text>
        </g>
      </g>
      
      <!-- Card 4: TESTS (expanded) -->
      <g id="card-tests" transform="translate(0, 228)">
        <rect width="648" height="120" rx="6" fill="#0d1117" stroke="#30363d"/>
        <g transform="translate(12, 14)">
          <text fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11" font-weight="600">TESTS</text>
          <text x="48" y="0" fill="#484f58" font-family="system-ui, sans-serif" font-size="10">4 covering this function</text>
          <path d="M620,0 L626,4 L632,0" stroke="#7d8590" fill="none" stroke-width="1.5" transform="translate(-8, -2)"/>
        </g>
        
        <!-- Test list -->
        <g transform="translate(16, 36)" font-family="system-ui, sans-serif" font-size="11">
          <!-- Test 1: passing -->
          <text fill="#22c55e" font-size="12">‚úì</text>
          <text x="20" fill="#c9d1d9">test checkout returns ref and worker pid</text>
          <text x="450" fill="#7d8590" font-size="9">12ms</text>
          
          <!-- Test 2: passing -->
          <text y="22" fill="#22c55e" font-size="12">‚úì</text>
          <text x="20" y="22" fill="#c9d1d9">test checkout timeout returns pool_busy</text>
          <text x="450" y="22" fill="#7d8590" font-size="9">8ms</text>
          
          <!-- Test 3: warning -->
          <text y="44" fill="#eab308" font-size="12">!</text>
          <text x="20" y="44" fill="#eab308">test monitors returned worker process</text>
          <rect x="310" y="34" width="90" height="16" rx="3" fill="#3d2e00" stroke="#eab308" stroke-width="0.5"/>
          <text x="320" y="46" fill="#eab308" font-size="9">flaky: 2/10 fail</text>
          <text x="450" y="44" fill="#7d8590" font-size="9">45ms</text>
          
          <!-- Test 4: no coverage -->
          <text y="66" fill="#484f58" font-size="12">‚óã</text>
          <text x="20" y="66" fill="#7d8590">test concurrent checkouts are serialized</text>
          <rect x="310" y="56" width="60" height="16" rx="3" fill="#21262d"/>
          <text x="318" y="68" fill="#7d8590" font-size="9">no cover</text>
        </g>
        
        <!-- Run tests button -->
        <g transform="translate(540, 94)">
          <rect width="90" height="22" rx="4" fill="#21262d" stroke="#30363d"/>
          <text x="20" y="15" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10">‚ñ∂ Run Tests</text>
        </g>
      </g>
      
      <!-- Card 5: AI SUMMARY -->
      <g id="card-ai-summary" transform="translate(0, 360)">
        <rect width="648" height="84" rx="6" fill="#0d1117" stroke="#8957e5" stroke-opacity="0.5"/>
        <g transform="translate(12, 14)">
          <!-- AI sparkle icon -->
          <g fill="#8957e5">
            <circle cx="6" cy="0" r="2"/>
            <circle cx="0" cy="4" r="1.5"/>
            <circle cx="12" cy="4" r="1.5"/>
            <circle cx="6" cy="8" r="1"/>
          </g>
          <text x="20" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11" font-weight="600">AI SUMMARY</text>
          <text x="100" y="0" fill="#8957e5" font-family="system-ui, sans-serif" font-size="9">Claude</text>
          <path d="M620,0 L626,4 L632,0" stroke="#7d8590" fill="none" stroke-width="1.5" transform="translate(-8, -2)"/>
        </g>
        <g transform="translate(16, 34)" font-family="system-ui, sans-serif" font-size="11">
          <text fill="#c9d1d9">This change adds <tspan fill="#7ee787">reference tracking</tspan> to worker checkouts.</text>
          <text y="18" fill="#c9d1d9">The returned <tspan font-family="monospace" fill="#ffa657">ref</tspan> enables callers to correlate checkout</text>
          <text y="36" fill="#c9d1d9">with checkin operations. <tspan fill="#f97316">Breaking change:</tspan> callers must</text>
          <text y="54" fill="#c9d1d9">update pattern matches to handle 3-tuple returns.</text>
        </g>
      </g>
    </g>
  </g>
  
  <!-- ==================== ACTION BAR (Bottom 10%) ==================== -->
  <g id="action-bar" transform="translate(16, 828)">
    <rect width="1368" height="56" rx="8" fill="url(#panelGradient)" stroke="#30363d" stroke-width="1"/>
    
    <!-- Primary actions (left) -->
    <g transform="translate(16, 14)">
      <!-- Approve button -->
      <rect width="100" height="32" rx="6" fill="#238636" stroke="#2ea043"/>
      <text x="20" y="21" fill="#ffffff" font-family="system-ui, sans-serif" font-size="12">‚úì Approve</text>
      
      <!-- Request Changes button -->
      <rect x="112" width="140" height="32" rx="6" fill="#21262d" stroke="#f85149"/>
      <text x="130" y="21" fill="#f85149" font-family="system-ui, sans-serif" font-size="12">‚úó Request Changes</text>
      
      <!-- Comment button -->
      <rect x="264" width="100" height="32" rx="6" fill="#21262d" stroke="#30363d"/>
      <text x="282" y="21" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="12">üí¨ Comment</text>
      
      <!-- Delegate button -->
      <rect x="376" width="100" height="32" rx="6" fill="#21262d" stroke="#30363d"/>
      <text x="396" y="21" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="12">‚Üí Delegate</text>
    </g>
    
    <!-- Review Progress (center) -->
    <g transform="translate(560, 14)">
      <text y="12" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11">Review Progress</text>
      <rect x="110" y="2" width="200" height="12" rx="6" fill="#21262d"/>
      <rect x="110" y="2" width="160" height="12" rx="6" fill="url(#progressGradient)"/>
      <text x="320" y="12" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">80%</text>
    </g>
    
    <!-- Risk indicator (center-right) -->
    <g transform="translate(920, 14)">
      <text y="12" fill="#7d8590" font-family="system-ui, sans-serif" font-size="11">Risk</text>
      <rect x="40" y="2" width="100" height="12" rx="6" fill="url(#riskGradient)"/>
      <g transform="translate(150, 0)">
        <rect width="65" height="18" rx="4" fill="#5d1e21" stroke="#f97316"/>
        <text x="8" y="13" fill="#f97316" font-family="system-ui, sans-serif" font-size="11" font-weight="600">HIGH 62</text>
      </g>
    </g>
    
    <!-- Reviewers (right) -->
    <g transform="translate(1230, 12)">
      <text y="10" fill="#7d8590" font-family="system-ui, sans-serif" font-size="10">Reviewing</text>
      <circle cx="80" cy="14" r="14" fill="#21262d" stroke="#30363d"/>
      <text x="74" y="19" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">JS</text>
      <circle cx="105" cy="14" r="14" fill="#21262d" stroke="#30363d"/>
      <text x="99" y="19" fill="#c9d1d9" font-family="system-ui, sans-serif" font-size="11">AR</text>
      <circle cx="125" cy="14" r="10" fill="#21262d" stroke="#30363d" stroke-dasharray="2,2"/>
      <text x="121" y="18" fill="#7d8590" font-family="system-ui, sans-serif" font-size="9">+</text>
    </g>
  </g>
  
  <!-- Window title/branding -->
  <g transform="translate(650, 6)">
    <text fill="#7d8590" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" letter-spacing="2">CINEMA DEBUGGER</text>
  </g>
</svg>
