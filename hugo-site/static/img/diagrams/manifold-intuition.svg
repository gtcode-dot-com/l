<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 550" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Advanced gradient for flat regions with depth -->
    <radialGradient id="flatGradient" cx="45%" cy="40%">
      <stop offset="0%" style="stop-color:#5eead4;stop-opacity:0.95" />
      <stop offset="30%" style="stop-color:#2dd4bf;stop-opacity:0.88" />
      <stop offset="70%" style="stop-color:#14b8a6;stop-opacity:0.75" />
      <stop offset="100%" style="stop-color:#0d9488;stop-opacity:0.65" />
    </radialGradient>

    <!-- Multi-stop gradient for curved regions with realistic lighting -->
    <radialGradient id="curvedGradient" cx="40%" cy="35%">
      <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:0.98" />
      <stop offset="25%" style="stop-color:#f59e0b;stop-opacity:0.92" />
      <stop offset="55%" style="stop-color:#f97316;stop-opacity:0.85" />
      <stop offset="80%" style="stop-color:#ea580c;stop-opacity:0.78" />
      <stop offset="100%" style="stop-color:#dc2626;stop-opacity:0.7" />
    </radialGradient>

    <!-- Ambient occlusion gradient for surface depth -->
    <linearGradient id="aoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#000000;stop-opacity:0.1" />
      <stop offset="50%" style="stop-color:#000000;stop-opacity:0.05" />
      <stop offset="100%" style="stop-color:#000000;stop-opacity:0.15" />
    </linearGradient>

    <!-- Specular highlight gradient -->
    <radialGradient id="specularHighlight" cx="35%" cy="30%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.4" />
      <stop offset="40%" style="stop-color:#ffffff;stop-opacity:0.15" />
      <stop offset="100%" style="stop-color:#ffffff;stop-opacity:0" />
    </radialGradient>

    <!-- Geodesic gradient for glowing effect -->
    <linearGradient id="geodesicGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#22d3ee;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#67e8f9;stop-opacity:1" />
    </linearGradient>

    <!-- Enhanced shadow filter with more depth -->
    <filter id="softShadow" x="-100%" y="-100%" width="300%" height="300%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
      <feOffset dx="3" dy="4" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.4"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Intense glow for geodesic path -->
    <filter id="intenseGlow">
      <feGaussianBlur stdDeviation="3.5" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Subtle glow for point markers -->
    <filter id="pointGlow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Drop shadow for text -->
    <filter id="textShadow">
      <feGaussianBlur in="SourceAlpha" stdDeviation="1.5"/>
      <feOffset dx="0" dy="1" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.5"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Marker for annotation arrows -->
    <marker id="arrowhead" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#94a3b8" opacity="0.8"/>
    </marker>

    <!-- Contour line pattern -->
    <pattern id="contourPattern" patternUnits="userSpaceOnUse" width="40" height="40">
      <path d="M 0,20 Q 10,18 20,20 T 40,20" stroke="#ffffff" stroke-width="0.3" fill="none" opacity="0.2"/>
    </pattern>
  </defs>

  <!-- Deep background with subtle gradient -->
  <rect width="800" height="550" fill="#0a0f1e"/>
  <rect width="800" height="550" fill="url(#aoGradient)" opacity="0.3"/>

  <!-- Title with refined typography -->
  <text x="400" y="45" font-family="Georgia, 'Times New Roman', serif" font-size="32" font-weight="300"
        fill="#f1f5f9" text-anchor="middle" letter-spacing="2" filter="url(#textShadow)">
    The Belief Manifold
  </text>
  <text x="400" y="68" font-family="'Segoe UI', Tahoma, sans-serif" font-size="13" font-weight="300"
        fill="#94a3b8" text-anchor="middle" letter-spacing="1">
    A geometric representation of epistemic space
  </text>

  <!-- Main isometric view container -->
  <g transform="translate(400, 300)">

    <!-- Ambient shadow beneath the entire surface -->
    <ellipse cx="0" cy="95" rx="320" ry="75" fill="#000000" opacity="0.25"/>
    <ellipse cx="0" cy="95" rx="300" ry="65" fill="#000000" opacity="0.15"/>

    <!-- LAYER 1: Base curved regions (back layer for depth) -->

    <!-- Curved region 1: Upper left saddle point with enhanced depth -->
    <g opacity="0.95">
      <path d="M -220,-95 Q -195,-118 -145,-108 Q -95,-98 -70,-75 Q -45,-52 -55,-25
               Q -65,2 -95,-5 Q -125,-12 -155,-25 Q -185,-38 -205,-60 Q -220,-78 -220,-95 Z"
            fill="url(#curvedGradient)" filter="url(#softShadow)"/>
      <path d="M -220,-95 Q -195,-118 -145,-108 Q -95,-98 -70,-75 Q -45,-52 -55,-25
               Q -65,2 -95,-5 Q -125,-12 -155,-25 Q -185,-38 -205,-60 Q -220,-78 -220,-95 Z"
            fill="url(#specularHighlight)"/>
      <!-- Contour lines for this region -->
      <path d="M -200,-85 Q -175,-100 -140,-95 Q -105,-88 -85,-70"
            stroke="#ffffff" stroke-width="0.4" fill="none" opacity="0.25"/>
      <path d="M -190,-75 Q -165,-88 -135,-85 Q -105,-80 -90,-65"
            stroke="#ffffff" stroke-width="0.4" fill="none" opacity="0.2"/>
    </g>

    <!-- Curved region 2: Lower right wave with realistic shading -->
    <g opacity="0.95">
      <path d="M 110,25 Q 135,12 180,30 Q 225,48 248,72 Q 271,96 258,125
               Q 245,154 210,145 Q 175,136 145,120 Q 115,104 105,75 Q 100,55 110,25 Z"
            fill="url(#curvedGradient)" filter="url(#softShadow)"/>
      <path d="M 110,25 Q 135,12 180,30 Q 225,48 248,72 Q 271,96 258,125
               Q 245,154 210,145 Q 175,136 145,120 Q 115,104 105,75 Q 100,55 110,25 Z"
            fill="url(#specularHighlight)"/>
      <!-- Contour lines -->
      <path d="M 125,35 Q 150,25 185,40 Q 220,55 238,75"
            stroke="#ffffff" stroke-width="0.4" fill="none" opacity="0.25"/>
      <path d="M 130,50 Q 155,42 190,55 Q 220,68 235,88"
            stroke="#ffffff" stroke-width="0.4" fill="none" opacity="0.2"/>
    </g>

    <!-- LAYER 2: Central flat region with sophisticated shading -->
    <g opacity="0.92">
      <path d="M -95,-75 Q -50,-88 0,-82 Q 50,-76 100,-62 Q 125,-48 128,-5
               Q 131,38 110,75 Q 65,95 0,88 Q -65,81 -110,68 Q -135,52 -135,5
               Q -135,-42 -95,-75 Z"
            fill="url(#flatGradient)" filter="url(#softShadow)"/>
      <path d="M -95,-75 Q -50,-88 0,-82 Q 50,-76 100,-62 Q 125,-48 128,-5
               Q 131,38 110,75 Q 65,95 0,88 Q -65,81 -110,68 Q -135,52 -135,5
               Q -135,-42 -95,-75 Z"
            fill="url(#specularHighlight)" opacity="0.5"/>
      <!-- Subtle ambient occlusion -->
      <path d="M -90,-70 Q -48,-82 0,-78 Q 48,-72 95,-60 Q 118,-48 120,-8
               Q 122,34 105,70 Q 62,88 0,82 Q -62,76 -105,65 Q -128,50 -128,3
               Q -128,-40 -90,-70 Z"
            fill="none" stroke="#0d9488" stroke-width="0.8" opacity="0.3"/>
    </g>

    <!-- LAYER 3: Enhanced grid system with curvature-following lines -->

    <!-- Horizontal grid lines - upper curved section (denser) -->
    <path d="M -240,-62 Q -170,-92 -95,-75 Q -20,-58 55,-65 Q 100,-70 130,-72"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.45" stroke-linecap="round"/>
    <path d="M -235,-52 Q -165,-82 -88,-68 Q -12,-50 62,-58 Q 108,-62 135,-65"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.42"/>
    <path d="M -228,-42 Q -158,-70 -82,-60 Q -5,-45 68,-52 Q 115,-56 140,-58"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.4"/>
    <path d="M -220,-32 Q -150,-58 -75,-50 Q 2,-38 75,-45 Q 122,-48 145,-50"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.38"/>
    <path d="M -210,-22 Q -142,-45 -68,-40 Q 8,-30 82,-38 Q 128,-42 150,-42"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.36"/>

    <!-- Middle section - flat region (sparser, straighter) -->
    <path d="M -200,-10 Q -120,-18 0,-12 Q 120,-6 200,-12"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.55" stroke-linecap="round"/>
    <path d="M -195,5 Q -110,0 5,6 Q 125,11 205,6"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.58"/>
    <path d="M -188,22 Q -100,18 12,25 Q 130,30 210,24"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.58"/>
    <path d="M -180,38 Q -92,35 20,42 Q 135,48 215,40"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.55"/>

    <!-- Lower section - curved region (denser again) -->
    <path d="M -172,55 Q -85,52 28,60 Q 140,68 220,58"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.42"/>
    <path d="M -162,68 Q -75,66 38,76 Q 148,86 228,75"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.4"/>
    <path d="M -152,82 Q -65,82 48,94 Q 158,106 238,92"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.38"/>
    <path d="M -142,96 Q -55,98 58,112 Q 168,126 248,110"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.36"/>
    <path d="M -132,110 Q -45,114 68,130 Q 178,146 258,128"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.34"/>
    <path d="M -122,124 Q -35,130 78,148 Q 188,166 268,146"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.32"/>

    <!-- Vertical grid lines with perspective and curvature -->
    <path d="M -210,-52 Q -208,-10 -198,35 Q -185,80 -165,115 Q -150,140 -135,155"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.38" stroke-linecap="round"/>
    <path d="M -150,-65 Q -148,-20 -140,25 Q -130,68 -115,100 Q -105,120 -95,135"
          stroke="#cbd5e1" stroke-width="0.65" fill="none" opacity="0.45"/>
    <path d="M -90,-75 Q -88,-25 -82,20 Q -75,60 -65,92 Q -58,112 -50,128"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.52"/>
    <path d="M -30,-80 Q -28,-28 -22,18 Q -16,58 -8,88 Q -2,108 5,122"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.55"/>
    <path d="M 30,-82 Q 32,-30 38,16 Q 44,56 52,86 Q 58,106 65,120"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.55"/>
    <path d="M 90,-78 Q 92,-28 98,18 Q 104,58 114,90 Q 122,112 130,128"
          stroke="#cbd5e1" stroke-width="0.7" fill="none" opacity="0.52"/>
    <path d="M 150,-68 Q 152,-22 160,24 Q 168,65 180,100 Q 190,125 200,142"
          stroke="#cbd5e1" stroke-width="0.65" fill="none" opacity="0.45"/>
    <path d="M 210,-52 Q 214,-8 224,38 Q 235,82 248,118 Q 258,142 268,158"
          stroke="#cbd5e1" stroke-width="0.6" fill="none" opacity="0.38"/>

    <!-- LAYER 4: Geodesic path with professional styling -->

    <!-- Outer glow layer -->
    <path d="M -135,-45 Q -70,-28 -15,-5 Q 40,18 90,38 Q 115,48 135,55 Q 148,60 158,65"
          stroke="#06b6d4" stroke-width="8" fill="none" opacity="0.15" stroke-linecap="round"/>
    <path d="M -135,-45 Q -70,-28 -15,-5 Q 40,18 90,38 Q 115,48 135,55 Q 148,60 158,65"
          stroke="#22d3ee" stroke-width="5" fill="none" opacity="0.25" stroke-linecap="round"/>

    <!-- Main geodesic path -->
    <path d="M -135,-45 Q -70,-28 -15,-5 Q 40,18 90,38 Q 115,48 135,55 Q 148,60 158,65"
          stroke="url(#geodesicGradient)" stroke-width="3.2" fill="none"
          stroke-dasharray="12,6" filter="url(#intenseGlow)" opacity="0.95"
          stroke-linecap="round" stroke-linejoin="round"/>

    <!-- LAYER 5: Point markers A and B with refined styling -->

    <!-- Point A -->
    <g filter="url(#pointGlow)">
      <circle cx="-135" cy="-45" r="8" fill="#f1f5f9" opacity="0.95"/>
      <circle cx="-135" cy="-45" r="5.5" fill="#06b6d4"/>
      <circle cx="-135" cy="-45" r="2.5" fill="#ffffff" opacity="0.8"/>
    </g>
    <text x="-135" y="-62" font-family="'Segoe UI', Arial, sans-serif" font-size="16"
          font-weight="600" fill="#f1f5f9" text-anchor="middle" filter="url(#textShadow)">A</text>

    <!-- Point B -->
    <g filter="url(#pointGlow)">
      <circle cx="158" cy="65" r="8" fill="#f1f5f9" opacity="0.95"/>
      <circle cx="158" cy="65" r="5.5" fill="#06b6d4"/>
      <circle cx="158" cy="65" r="2.5" fill="#ffffff" opacity="0.8"/>
    </g>
    <text x="158" y="88" font-family="'Segoe UI', Arial, sans-serif" font-size="16"
          font-weight="600" fill="#f1f5f9" text-anchor="middle" filter="url(#textShadow)">B</text>

    <!-- LAYER 6: Professional annotations with elegant leader lines -->

    <!-- Annotation 1: High curvature (upper left) -->
    <g opacity="0.95">
      <path d="M -195,-100 L -245,-135" stroke="#94a3b8" stroke-width="1.2"
            fill="none" opacity="0.7" stroke-linecap="round"/>
      <circle cx="-195" cy="-100" r="2.5" fill="#f97316" opacity="0.8"/>
      <text x="-255" y="-140" font-family="'Segoe UI', Arial, sans-serif" font-size="13"
            font-weight="400" fill="#fcd34d" text-anchor="end" filter="url(#textShadow)">
        High curvature
      </text>
      <text x="-255" y="-124" font-family="'Segoe UI', Arial, sans-serif" font-size="12"
            font-weight="300" fill="#fde68a" text-anchor="end" opacity="0.9">
        (epistemic difficulty)
      </text>
    </g>

    <!-- Annotation 2: Geodesic path (upper middle) -->
    <g opacity="0.95">
      <path d="M 10,-12 L 45,-128" stroke="#94a3b8" stroke-width="1.2"
            fill="none" opacity="0.7" stroke-linecap="round"/>
      <circle cx="10" cy="-12" r="2.5" fill="#22d3ee" opacity="0.8"/>
      <text x="52" y="-136" font-family="'Segoe UI', Arial, sans-serif" font-size="13"
            font-weight="400" fill="#67e8f9" text-anchor="start" filter="url(#textShadow)">
        Geodesic path
      </text>
      <text x="52" y="-120" font-family="'Segoe UI', Arial, sans-serif" font-size="12"
            font-weight="300" fill="#a5f3fc" text-anchor="start" opacity="0.9">
        (shortest distance on manifold)
      </text>
    </g>

    <!-- Annotation 3: Flat region (center left) -->
    <g opacity="0.95">
      <path d="M -45,15 L -290,-10" stroke="#94a3b8" stroke-width="1.2"
            fill="none" opacity="0.7" stroke-linecap="round"/>
      <circle cx="-45" cy="15" r="2.5" fill="#2dd4bf" opacity="0.8"/>
      <text x="-300" y="-12" font-family="'Segoe UI', Arial, sans-serif" font-size="12"
            font-weight="400" fill="#5eead4" text-anchor="end" filter="url(#textShadow)">
        Flat region
      </text>
      <text x="-300" y="2" font-family="'Segoe UI', Arial, sans-serif" font-size="11"
            font-weight="300" fill="#99f6e4" text-anchor="end" opacity="0.85">
        (low epistemic cost)
      </text>
    </g>

    <!-- Annotation 4: Curved region marker (lower right) -->
    <g opacity="0.95">
      <path d="M 215,105 L 290,145" stroke="#94a3b8" stroke-width="1.2"
            fill="none" opacity="0.7" stroke-linecap="round"/>
      <circle cx="215" cy="105" r="2.5" fill="#f97316" opacity="0.8"/>
      <text x="298" y="148" font-family="'Segoe UI', Arial, sans-serif" font-size="12"
            font-weight="400" fill="#fdba74" text-anchor="start" filter="url(#textShadow)">
        Curved region
      </text>
    </g>

    <!-- Annotation 5: Grid density indicator -->
    <g opacity="0.95">
      <path d="M 140,-25 L 235,-52" stroke="#94a3b8" stroke-width="1.2"
            fill="none" opacity="0.7" stroke-linecap="round"/>
      <text x="243" y="-55" font-family="'Segoe UI', Arial, sans-serif" font-size="11"
            font-weight="300" fill="#cbd5e1" text-anchor="start" opacity="0.85">
        Grid density varies
      </text>
      <text x="243" y="-42" font-family="'Segoe UI', Arial, sans-serif" font-size="11"
            font-weight="300" fill="#cbd5e1" text-anchor="start" opacity="0.85">
        with curvature
      </text>
    </g>

  </g>

  <!-- BOTTOM LEGEND: Publication-quality scientific figure legend -->
  <g transform="translate(0, 495)">
    <!-- Legend background panel -->
    <rect x="50" y="-18" width="700" height="52" rx="6" fill="#1e293b" opacity="0.6"/>
    <rect x="50" y="-18" width="700" height="52" rx="6" fill="none" stroke="#475569"
          stroke-width="0.8" opacity="0.4"/>

    <!-- Legend title -->
    <text x="70" y="0" font-family="'Segoe UI', Arial, sans-serif" font-size="11"
          font-weight="600" fill="#e2e8f0" letter-spacing="0.5">
      LEGEND
    </text>

    <!-- Element 1: Grid density -->
    <g transform="translate(70, 15)">
      <line x1="0" y1="-2" x2="20" y2="-2" stroke="#cbd5e1" stroke-width="1.5" opacity="0.6"/>
      <line x1="0" y1="1" x2="20" y2="1" stroke="#cbd5e1" stroke-width="1.5" opacity="0.6"/>
      <line x1="0" y1="4" x2="20" y2="4" stroke="#cbd5e1" stroke-width="1.5" opacity="0.6"/>
      <text x="28" y="5" font-family="'Segoe UI', Arial, sans-serif" font-size="10.5"
            font-weight="400" fill="#cbd5e1">
        Grid lines follow surface curvature
      </text>
    </g>

    <!-- Element 2: Low curvature -->
    <g transform="translate(280, 15)">
      <circle cx="8" cy="2" r="6" fill="#2dd4bf" opacity="0.85"/>
      <circle cx="8" cy="2" r="3" fill="#5eead4" opacity="0.95"/>
      <text x="22" y="5" font-family="'Segoe UI', Arial, sans-serif" font-size="10.5"
            font-weight="400" fill="#cbd5e1">
        Low curvature (easy belief updates)
      </text>
    </g>

    <!-- Element 3: High curvature -->
    <g transform="translate(500, 15)">
      <circle cx="8" cy="2" r="6" fill="#f97316" opacity="0.85"/>
      <circle cx="8" cy="2" r="3" fill="#fbbf24" opacity="0.95"/>
      <text x="22" y="5" font-family="'Segoe UI', Arial, sans-serif" font-size="10.5"
            font-weight="400" fill="#cbd5e1">
        High curvature (difficult transitions)
      </text>
    </g>
  </g>

  <!-- Footer attribution (subtle) -->
  <text x="400" y="542" font-family="'Segoe UI', Arial, sans-serif" font-size="9"
        font-weight="300" fill="#475569" text-anchor="middle" opacity="0.6">
    Mathematical visualization of epistemic geometry
  </text>

</svg>
