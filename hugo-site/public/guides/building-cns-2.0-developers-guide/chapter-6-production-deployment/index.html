<!DOCTYPE html>
<html lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chapter 6: Production Deployment &amp; Scaling | Building CNS 2.0: A Developer&#39;s Guide</title>
    <meta name="description" content="Taking the CNS 2.0 system from a single-process prototype to a scalable, production-grade service.">
    <meta name="author" content="CNS Development Team">
    
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß†</text></svg>">
    
    
    <link rel="stylesheet" href="/css/style.css?v=1753861360">
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    




    
    
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
    <div class="site-wrapper">
        
        <header class="site-header">
            <div class="container">
                <nav class="main-nav">
                    <div class="nav-brand">
                        <a href="/guides/building-cns-2.0-developers-guide/" class="brand-link">
                            <span class="brand-icon">üß†</span>
                            <span class="brand-text">Building CNS 2.0: A Developer&#39;s Guide</span>
                        </a>
                    </div>
                    
                    <div class="nav-menu">
                        <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">
                            <i data-feather="menu"></i>
                        </button>
                        
                        <ul class="nav-list">
                            
                                <li class="nav-item">
                                    <a href="/guides/building-cns-2.0-developers-guide/chapter-1-introduction/" class="nav-link ">
                                        Introduction
                                    </a>
                                </li>
                            
                                <li class="nav-item">
                                    <a href="/guides/building-cns-2.0-developers-guide/chapter-2-sno-foundations/" class="nav-link ">
                                        SNO Foundations
                                    </a>
                                </li>
                            
                                <li class="nav-item">
                                    <a href="/guides/building-cns-2.0-developers-guide/chapter-3-critic-pipeline/" class="nav-link ">
                                        Critic Pipeline
                                    </a>
                                </li>
                            
                                <li class="nav-item">
                                    <a href="/guides/building-cns-2.0-developers-guide/chapter-4-synthesis-engine/" class="nav-link ">
                                        Synthesis Engine
                                    </a>
                                </li>
                            
                                <li class="nav-item">
                                    <a href="/guides/building-cns-2.0-developers-guide/chapter-5-system-integration/" class="nav-link ">
                                        System Integration
                                    </a>
                                </li>
                            
                                <li class="nav-item">
                                    <a href="/guides/building-cns-2.0-developers-guide/chapter-6-complete-implementation/" class="nav-link ">
                                        Complete Implementation
                                    </a>
                                </li>
                            
                                <li class="nav-item">
                                    <a href="/guides/building-cns-2.0-developers-guide/chapter-7-dspy-integration/" class="nav-link ">
                                        DSPy Integration
                                    </a>
                                </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </header>

        
        <main class="site-main">
            <div class="container">
                
<article class="content-article">
    
    <header class="article-header">
        <div class="article-meta">
            <span class="article-weight">Chapter 6 of 7</span>
            <span class="article-separator">‚Ä¢</span>
            <time class="article-date">July 29, 2025</time>
        </div>
        
        <h1 class="article-title">Chapter 6: Production Deployment &amp; Scaling</h1>
        
        
        <p class="article-description">Taking the CNS 2.0 system from a single-process prototype to a scalable, production-grade service.</p>
        
        
        
        <div class="progress-indicator">
            <div class="progress-bar">
                <div class="progress-fill" style="width: 100.02000000000001%"></div>
            </div>
        </div>
    </header>

    
    <aside class="article-toc">
        <h3>Table of Contents</h3>
        <nav id="TableOfContents">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#from-prototype-to-production">From Prototype to Production</a></li>
    <li><a href="#the-production-architecture-decoupling-with-a-job-queue">The Production Architecture: Decoupling with a Job Queue</a></li>
    <li><a href="#1-containerization-with-docker">1. Containerization with Docker</a></li>
    <li><a href="#2-distributed-task-execution-with-celery">2. Distributed Task Execution with Celery</a></li>
    <li><a href="#3-production-ready-observability">3. Production-Ready Observability</a>
      <ul>
        <li><a href="#structured-logging-with-structlog">Structured Logging with <code>structlog</code></a></li>
        <li><a href="#externalized-configuration-management">Externalized Configuration Management</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </nav>
    </aside>

    
    <div class="article-content">
        <div class="guide-header">
    <a href="/" class="home-link">‚Üê Back to GTCode.com Homepage</a>
</div>
<h1 id="chapter-6-production-deployment--scaling">Chapter 6: Production Deployment &amp; Scaling</h1>
<h2 id="from-prototype-to-production">From Prototype to Production</h2>
<p>In Chapter 5, we built a fully functional, single-process CNS system using <code>asyncio</code>. This is an excellent architecture for development and testing. This chapter answers the critical next question: <strong>&ldquo;How do I run this as a robust, scalable, production-grade service?&rdquo;</strong></p>
<p>Taking a prototype to production requires evolving our architecture to be distributed, containerized, and observable. We will cover three pillars:</p>
<ol>
<li><strong>Containerization</strong>: Packaging our application and its dependencies into a portable format using Docker.</li>
<li><strong>Distributed Task Execution</strong>: Replacing the single <code>asyncio</code> queue with a powerful job queue system (Celery with Redis) to enable horizontal scaling.</li>
<li><strong>Production-Ready Observability</strong>: Implementing structured logging and externalized configuration, which are essential for managing a deployed application.</li>
</ol>
<h2 id="the-production-architecture-decoupling-with-a-job-queue">The Production Architecture: Decoupling with a Job Queue</h2>
<p>The single-process <code>asyncio</code> model is limited by the resources of a single machine. To handle a high volume of tasks, we must evolve to a distributed architecture that decouples task submission from task execution.</p>
<div style="text-align: center;">
  <img src="/img/diagram-02.svg" alt="A diagram of the production architecture, showing an API Server sending tasks to a Redis Queue, which are then consumed by multiple Celery Worker containers." style="display: inline-block;" />
</div>
<p>This architecture consists of three main services:</p>
<ol>
<li><strong>API Server (FastAPI)</strong>: A lightweight web server that provides an entry point to the system. Its only job is to validate requests and add them as tasks to the message broker.</li>
<li><strong>Message Broker (Redis)</strong>: A high-performance message queue that holds the &ldquo;to-do list&rdquo; of tasks for the entire system.</li>
<li><strong>Celery Workers</strong>: These are the workhorses. Each worker is a container running our CNS application. They connect to Redis, pull tasks from the queue, and execute them. You can run one, ten, or a hundred of these workers in parallel.</li>
</ol>
<h2 id="1-containerization-with-docker">1. Containerization with Docker</h2>
<p>Containerizing our application with Docker is the foundational step. It bundles our code, dependencies, and environment into a single, portable image.</p>
<p><strong><code>requirements.txt</code>:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span># Core CNS Libraries
</span></span><span style="display:flex;"><span>numpy
</span></span><span style="display:flex;"><span>networkx
</span></span><span style="display:flex;"><span>torch
</span></span><span style="display:flex;"><span>transformers
</span></span><span style="display:flex;"><span>sentence-transformers
</span></span><span style="display:flex;"><span>faiss-cpu         # Use faiss-gpu if you have a compatible GPU
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Production Services
</span></span><span style="display:flex;"><span>fastapi           # For the API server
</span></span><span style="display:flex;"><span>uvicorn           # ASGI server for FastAPI
</span></span><span style="display:flex;"><span>redis             # Python client for Redis
</span></span><span style="display:flex;"><span>celery            # Distributed task queue
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Observability
</span></span><span style="display:flex;"><span>structlog         # Structured logging
</span></span><span style="display:flex;"><span>PyYAML            # For loading config files
</span></span></code></pre></div><p><strong><code>Dockerfile</code>:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># Start with an official Python slim image</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> python:3.10-slim</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /usr/src/app</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Copy and install dependencies first to leverage Docker&#39;s layer caching</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> requirements.txt ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> pip install --no-cache-dir -r requirements.txt<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Copy the rest of the application code</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> ./cns /usr/src/app/cns<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># The default command will be to start a Celery worker.</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># We can override this to start the API server instead.</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [ <span style="color:#e6db74">&#34;celery&#34;</span>, <span style="color:#e6db74">&#34;-A&#34;</span>, <span style="color:#e6db74">&#34;cns.tasks&#34;</span>, <span style="color:#e6db74">&#34;worker&#34;</span>, <span style="color:#e6db74">&#34;--loglevel=info&#34;</span> ]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h2 id="2-distributed-task-execution-with-celery">2. Distributed Task Execution with Celery</h2>
<p>We now replace the in-memory <code>asyncio.Queue</code> with <strong>Celery</strong>, a powerful distributed task queue, using <strong>Redis</strong> as its message broker.</p>
<p><strong><code>cns/tasks.py</code> - Defining the Work:</strong>
This file defines the functions our workers will execute. We initialize a singleton of our <code>CNSWorkflowManager</code> so that models are loaded only once per worker, making it very efficient.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># cns/tasks.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> celery <span style="color:#f92672">import</span> Celery
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .workflow <span style="color:#f92672">import</span> CNSWorkflowManager <span style="color:#75715e"># Your main CNS logic</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .logging_setup <span style="color:#f92672">import</span> logger <span style="color:#75715e"># Use our structured logger</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Configure Celery to use Redis as the message broker.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The hostname &#39;redis&#39; will be resolved by Docker Compose&#39;s internal networking.</span>
</span></span><span style="display:flex;"><span>celery_app <span style="color:#f92672">=</span> Celery(<span style="color:#e6db74">&#39;cns_tasks&#39;</span>, broker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;redis://redis:6379/0&#39;</span>, backend<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;redis://redis:6379/0&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Initialize a singleton instance of the CNS manager.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This object will persist in the worker&#39;s memory.</span>
</span></span><span style="display:flex;"><span>logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;worker.initializing_cns_manager&#34;</span>)
</span></span><span style="display:flex;"><span>cns_manager <span style="color:#f92672">=</span> CNSWorkflowManager()
</span></span><span style="display:flex;"><span>logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;worker.cns_manager_initialized&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@celery_app.task</span>(name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;process_document_ingestion&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_document_ingestion</span>(document_text: str, source: str):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;A Celery task to handle the ingestion of a single document.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;ingestion_task.received&#34;</span>, source<span style="color:#f92672">=</span>source, text_length<span style="color:#f92672">=</span>len(document_text))
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Note: The original manager used asyncio. For Celery, the core logic</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># inside the manager should be synchronous.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        sno <span style="color:#f92672">=</span> cns_manager<span style="color:#f92672">.</span>ingest_and_evaluate(document_text, source)
</span></span><span style="display:flex;"><span>        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;ingestion_task.complete&#34;</span>, source<span style="color:#f92672">=</span>source, sno_id<span style="color:#f92672">=</span>sno<span style="color:#f92672">.</span>sno_id)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> sno<span style="color:#f92672">.</span>to_dict()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">&#34;ingestion_task.failed&#34;</span>, error<span style="color:#f92672">=</span>str(e), source<span style="color:#f92672">=</span>source)
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Propagate the error so the task can be marked as failed.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span>
</span></span></code></pre></div><p><strong><code>cns/main.py</code> - The API Entrypoint:</strong>
This lightweight FastAPI server receives requests and dispatches them to the queue. It does no heavy lifting itself.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># cns/main.py</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> fastapi <span style="color:#f92672">import</span> FastAPI, HTTPException
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pydantic <span style="color:#f92672">import</span> BaseModel
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> .tasks <span style="color:#f92672">import</span> process_document_ingestion
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app <span style="color:#f92672">=</span> FastAPI(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;CNS 2.0 API&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IngestionRequest</span>(BaseModel):
</span></span><span style="display:flex;"><span>    source: str
</span></span><span style="display:flex;"><span>    text: str
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@app.post</span>(<span style="color:#e6db74">&#34;/ingest&#34;</span>, status_code<span style="color:#f92672">=</span><span style="color:#ae81ff">202</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">ingest_document</span>(request: IngestionRequest):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Accepts a document for ingestion and adds it to the processing queue.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Returns immediately with a task ID.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> request<span style="color:#f92672">.</span>text <span style="color:#f92672">or</span> <span style="color:#f92672">not</span> request<span style="color:#f92672">.</span>source:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> HTTPException(status_code<span style="color:#f92672">=</span><span style="color:#ae81ff">400</span>, detail<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Source and text cannot be empty.&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># This is the key step: .delay() sends the task to the Celery queue</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># and returns immediately without waiting for the result.</span>
</span></span><span style="display:flex;"><span>    task <span style="color:#f92672">=</span> process_document_ingestion<span style="color:#f92672">.</span>delay(document_text<span style="color:#f92672">=</span>request<span style="color:#f92672">.</span>text, source<span style="color:#f92672">=</span>request<span style="color:#f92672">.</span>source)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Ingestion task accepted&#34;</span>, <span style="color:#e6db74">&#34;task_id&#34;</span>: task<span style="color:#f92672">.</span>id}
</span></span></code></pre></div><p><strong><code>docker-compose.yml</code> - Orchestrating the Services:</strong>
This file defines and connects our three services.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#e6db74">&#39;3.8&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">redis</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">redis:7-alpine</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;6379:6379&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">api</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>: <span style="color:#ae81ff">.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">command</span>: <span style="color:#ae81ff">uvicorn cns.main:app --host 0.0.0.0 --port 8000</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./cns:/usr/src/app/cns</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;8000:8000&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">redis</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">worker</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>: <span style="color:#ae81ff">.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># The default CMD from the Dockerfile is used here.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./cns:/usr/src/app/cns</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">redis</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Add deploy section to scale workers</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">2</span> <span style="color:#75715e"># Start with 2 workers, can be scaled with `docker-compose up --scale worker=5`</span>
</span></span></code></pre></div><p>With this setup, you can start the entire distributed system with <code>docker-compose up</code> and scale the number of workers on demand to handle any workload.</p>
<h2 id="3-production-ready-observability">3. Production-Ready Observability</h2>
<p>(This section remains the same as it is already clear and effective.)</p>
<h3 id="structured-logging-with-structlog">Structured Logging with <code>structlog</code></h3>
<p>(This section remains the same.)</p>
<h3 id="externalized-configuration-management">Externalized Configuration Management</h3>
<p>(This section remains the same.)</p>

    </div>

    
    <nav class="article-nav">
        <div class="nav-previous">
            
                <a href="/guides/building-cns-2.0-developers-guide/chapter-7-dspy-integration/" class="nav-link prev-link">
                    <i data-feather="arrow-right"></i>
                    <div class="nav-text">
                        <span class="nav-label">Next</span>
                        <span class="nav-title">Chapter 7: Advanced Optimization with DSPy</span>
                    </div>
                </a>
            
        </div>
        
        <div class="nav-next">
            
                <a href="/guides/building-cns-2.0-developers-guide/chapter-5-system-integration/" class="nav-link next-link">
                    <div class="nav-text">
                        <span class="nav-label">Previous</span>
                        <span class="nav-title">Chapter 5: System Integration</span>
                    </div>
                    <i data-feather="arrow-left"></i>
                </a>
            
        </div>
    </nav>

    
    <aside class="chapter-summary">
        <h3>Chapter Summary</h3>
        <div class="summary-content">
            
                <p>Complete production-ready implementation with deployment guidelines.</p>
                <ul>
                    <li>Advanced synthesis engine</li>
                    <li>Production deployment configuration</li>
                    <li>Performance optimization and monitoring</li>
                </ul>
            
        </div>
    </aside>
</article>

            </div>
        </main>

        
        <footer class="site-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-text">
                        <p>&copy; 2025 <a href="https://GTCode.com/" class="footer-link">GTCode.com</a>. Educational content for CNS 2.0 implementation.</p>
                        <p>Based on <a target="_blank" 
                               rel="noopener noreferrer" href="/papers/ResearchProposal-ChiralNarrativeSynthesis_20250617_3.pdf" class="footer-link">CNS 2.0: A Practical Blueprint for Chiral Narrative Synthesis</a> research paper. (20250617 Version 3)</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    
    <script src="/js/navigation.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    
    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}]});"></script>
    
    <script>
        
        if (window.feather) feather.replace();
    </script>
</body>
</html>
