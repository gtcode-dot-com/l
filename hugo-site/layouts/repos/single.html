{{ define "main" }}
<article class="article-content">
  <header class="article-header">
    {{ with .Params.stage }}
      <p class="article-eyebrow">
        <span class="badge badge-secondary">{{ . }}</span>
        {{ with $.Params.version }}
          <span class="text-muted">v{{ . }}</span>
        {{ end }}
      </p>
    {{ end }}
    <h1>{{ .Title }}</h1>
    {{ with .Description }}
      <p class="article-lede">{{ . }}</p>
    {{ end }}
  </header>

  {{ if .Params.highlights }}
    <section class="repo-stats">
      <h2>Stats & Info</h2>
      <ul class="repo-highlights">
        {{ range .Params.highlights }}
          <li>{{ . }}</li>
        {{ end }}
      </ul>
    </section>
  {{ end }}

  {{ if .Content }}
    <section class="repo-description">
      {{ .Content }}
    </section>
  {{ end }}

  {{ if .Params.tags }}
    <section class="repo-tags-section">
      <h2>Tags</h2>
      <div class="repo-card-tags">
        {{ range .Params.tags }}
          <span class="tag">{{ . }}</span>
        {{ end }}
      </div>
    </section>
  {{ end }}

  <!-- Enhanced Installation Section -->
  {{ with .Params.installation }}
  <section class="repo-section">
    <h2>Installation</h2>
    <div class="installation-steps">
      {{ range . }}
      <div class="install-method">
        <h3>{{ .method }}</h3>
        <pre><code>{{ .command }}</code></pre>
        {{ with .note }}
        <p class="install-note">{{ . }}</p>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </section>
  {{ else }}
  <section class="repo-installation">
    <h2>Installation</h2>
    <p>Add <code>{{ .Params.slug }}</code> to your list of dependencies in <code>mix.exs</code>:</p>
    <pre><code class="language-elixir">def deps do
  [
    {:{{ .Params.slug }}, "~> {{ .Params.version }}"}
  ]
end</code></pre>
    <p>Then run:</p>
    <pre><code class="language-bash">mix deps.get</code></pre>
  </section>
  {{ end }}

  <!-- Usage Section -->
  {{ with .Params.usage }}
  <section class="repo-section">
    <h2>Quick Start</h2>
    {{ . | markdownify }}
  </section>
  {{ end }}

  <!-- Release Timeline -->
  {{ with .Params.releases }}
  <section class="repo-section">
    <h2>Release History</h2>
    <div class="timeline">
      {{ range . }}
      <div class="timeline-item">
        <div class="timeline-marker"></div>
        <div class="timeline-content">
          <div class="timeline-version">{{ .version }}</div>
          <div class="timeline-date">{{ .date }}</div>
          {{ with .notes }}
          <div class="timeline-notes">{{ . }}</div>
          {{ end }}
        </div>
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}

  <section class="repo-actions">
    <h2>Resources</h2>
    <div class="repo-resource-links">
      {{ with .Params.docs_url }}
        <a class="btn btn-primary" href="{{ . }}" target="_blank" rel="noopener">View Documentation</a>
      {{ end }}
      {{ with .Params.hex_url }}
        <a class="btn btn-secondary" href="{{ . }}" target="_blank" rel="noopener">View on Hex.pm</a>
      {{ end }}
      {{ with .Params.repo_url }}
        <a class="btn btn-secondary" href="{{ . }}" target="_blank" rel="noopener">View on GitHub</a>
      {{ end }}
    </div>
  </section>

  <nav class="article-nav">
    <a href="/repos/" class="btn btn-secondary">‚Üê Back to all repos</a>
  </nav>
</article>
{{ end }}
